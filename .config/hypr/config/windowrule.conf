windowrule {
    name = suppress-maximize-events
    match:class = .*

    suppress_event = maximize
}

windowrule {
    name = fix-xwayland-drags
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false

    no_focus = true
}

# ============================================================================
# EWW DASHBOARD LAYER RULES
# ============================================================================

# EWW dashboard - highest priority overlay
layerrule {
    name = eww-dashboard
    match:namespace = eww-dashboard

    blur = true
    xray = true
    ignore_alpha = 0
    order = 100
}

# ============================================================================
# ROFI LAYER RULES
# ============================================================================

# Rofi - overlay layer (below eww-dashboard)
layerrule {
    name = rofi-blur
    match:namespace = rofi

    blur = true
}

# ============================================================================
# WAYBAR LAYER RULES
# ============================================================================

# Waybar - top layer (below rofi)
layerrule {
    name = waybar-blur
    match:namespace = waybar

    blur = true
}

# ============================================================================
# HYPRPAPER LAYER RULES
# ============================================================================

# Hyprpaper - background layer (lowest)
layerrule {
    name = hyprpaper-bg
    match:namespace = hyprpaper

    blur = false
}


# File manager - float and center
windowrule {
    name = thunar-float
    match:class = thunar

    float = on
    center = on
    size = 1200 800
}

# Image viewers - float
windowrule {
    name = image-viewers
    match:class = (imv|feh|sxiv|nsxiv|qimgv)

    float = on
    center = on
}

# Video players - float and keep aspect ratio
windowrule {
    name = video-players
    match:class = (mpv|vlc|celluloid)

    float = on
    center = on
    keep_aspect_ratio = on
}

# Pavucontrol - float and position
windowrule {
    name = pavucontrol-float
    match:class = pavucontrol

    float = on
    size = 800 600
    center = on
}

# Blueman - float
windowrule {
    name = blueman-float
    match:class = (blueman-manager|.blueman-manager-wrapped)

    float = on
    size = 700 500
    center = on
}

# Network manager applet
windowrule {
    name = nm-applet
    match:class = nm-connection-editor

    float = on
    center = on
}

# Calculator apps
windowrule {
    name = calculator-float
    match:class = (qalculate-gtk|gnome-calculator|kcalc)

    float = on
    size = 400 600
}

# Color picker
windowrule {
    name = color-picker
    match:class = (gcolor3|gpick)

    float = on
    size = 400 500
}

# File dialogs - float and center
windowrule {
    name = file-dialogs
    match:title = (Open File|Save File|Open Folder|Select|Choose|Browse)

    float = on
    center = on
    size = 1000 700
}

# Confirmation dialogs
windowrule {
    name = confirm-dialogs
    match:title = (Confirm|Warning|Error|Question|Alert)

    float = on
    center = on
    stay_focused = on
}

# Pinentry (GPG password prompts)
windowrule {
    name = pinentry
    match:class = (pinentry-.*)

    float = on
    center = on
    stay_focused = on
}

# Polkit authentication
windowrule {
    name = polkit-auth
    match:class = (polkit-gnome-authentication-agent-1|lxpolkit)

    float = on
    center = on
    stay_focused = on
}

windowrule {
    name = pip-firefox
    match:class = firefox
    match:title = Picture-in-Picture

    float = on
    pin = on
    size = 640 360
    move = 100%-660 100%-380
    no_focus = on
}

windowrule {
    name = pip-chrome
    match:class = (chromium|google-chrome|brave-browser|opera)
    match:title = Picture in picture

    float = on
    pin = on
    size = 640 360
    move = 100%-660 100%-380
    no_focus = on
}

# Terminal scratchpad style
windowrule {
    name = kitty-dropdown
    match:class = kitty
    match:title = dropdown

    float = on
    size = 80% 60%
    center = on
    animation = slide
}

# QEMU/Virt-manager
windowrule {
    name = virt-manager
    match:class = (virt-manager|qemu)

    float = on
    center = on
}

# Burp Suite
windowrule {
    name = burpsuite
    match:class = burp-StartBurp

    float = off
}

# Wireshark
windowrule {
    name = wireshark
    match:class = (wireshark|Wireshark)

    float = off
}

# Ghidra
windowrule {
    name = ghidra
    match:class = ghidra-Ghidra

    float = off
}

# Autopsy
windowrule {
    name = autopsy
    match:class = org-sleuthkit-autopsy-core-Installer

    float = off
}

windowrule {
    name = games-fullscreen
    match:class = (steam_app_.*|gamescope)

    fullscreen = on
    immediate = on
}

windowrule {
    name = steam-friends
    match:class = steam
    match:title = Friends List

    float = on
    size = 400 600
}

windowrule {
    name = discord-popout
    match:class = discord
    match:title = Discord Popout

    float = on
    pin = on
}

# ============================================================================
# EWW WINDOW RULES
# ============================================================================

# EWW windows should not steal focus
windowrule {
    name = eww-nofocus
    match:class = eww

    no_focus = true
}

# ============================================================================
# SPOTIFY
# ============================================================================

windowrule {
    name = spotify
    match:class = (Spotify|spotify)

    float = off
}
